<html>
<head>
	<title>Seat & Ticket Reservation</title>
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
	<link rel="stylesheet" href="./style.css">

<style>
	form
    {
		width: 10%;
		margin-left: auto;
		margin-right: auto;
	}
</style>

<script >
      function passvalues()
  {

        /* 
        - initializes adult_ticket with the number inputted on the textbox with the id="adult."
        - calculates the total price of the # of adult tickets.
        - localStorage.setItem holds the value of adult_ticket which will be assigned to a string"
         */
    var adult_ticket = Number(document.getElementById("adult").value);
    var adult_price_total= 14.95 * adult_ticket;
    localStorage.setItem("adultticketvalue",adult_ticket);
    localStorage.setItem("adultvalue",adult_price_total.toFixed(2));

        /*
          localStorage.setItem basically assigns the variable being held to a string, which can then be used later
          anywhere to get value of that string using localStorage.getItem method.
        */
    var senior_ticket = Number(document.getElementById("senior").value);
    var senior_price_total = 13.95 * senior_ticket;
    localStorage.setItem("seniorticketvalue",senior_ticket);
    localStorage.setItem("seniorvalue",senior_price_total.toFixed(2));


    var child_ticket = Number(document.getElementById("child").value);
    var child_price_total = 12.95 * child_ticket;
    localStorage.setItem("childticketvalue",child_ticket);
    localStorage.setItem("childvalue",child_price_total.toFixed(2));

    var subtotal, hst, total;

        /* toFixed() method is used to set numbers to 2 decimal places */
    subtotal = adult_price_total + senior_price_total + child_price_total;
    localStorage.setItem("subtotalvalue", subtotal.toFixed(2));

    hst = subtotal * 0.13;
    localStorage.setItem("hstvalue", hst.toFixed(2));
    
    total = subtotal * 1.13;
    localStorage.setItem("totalvalue", total.toFixed(2));



        /*
            - initialize variable seat_checkbox_array which is set equal to the
            checkbox with the id="seats"
            - uses for loop to count each checkbox to the last checkbox
            - if any of the checkbox is checked, the value of the checkbox will be stored to a string using
            localStorage.setItem() method.

         */
        var seat_checkbox_array, seat_checkbox_value;
        seat_checkbox_array = document.getElementsByName("seats");
        for (i = 0; i < seat_checkbox_array.length; i++)
        {
            if (seat_checkbox_array[i].checked)
            {
                seat_checkbox_value = seat_checkbox_array[i].value
                localStorage.setItem("seatvalue", seat_checkbox_value);
            }
        }


        // creates a function to return to the previous page
         function returnToPreviousPage()
            {
                window.history.back();
            }

        /* if no ticket has been selected, it will have an alert message, then the form 
        will not be submitted, but instead return to the previous form using the created function above. */
        if (adult_ticket == 0 && child_ticket == 0 && senior_ticket ==0)
        {
            alert("Please choose at least one ticket!");
            returnToPreviousPage();
            return false;
           
        }


        document.getElementById("display_time").innerHTML = localStorage.getItem("movie_time");

    return false;

  }
</script>

</head>
<body onload="onLoaderFunc()">
<!-- partial:index.partial.html -->
<h2 align="center">Seat Reservation</h2>
<div class="inputForm">
<center>
  Number of Seats *: <input type="number" id="Numseats" required>
  <br/><br/>
  <button onclick="takeData()">Start Selecting</button>
</center>
</div>
  

<div class="seatStructure">
<center>
  
<table id="seatsBlock">
 <p id="notification"></p>  
  <tr>
    <td></td>
    <td>1</td>
    <td>2</td>
    <td>3</td>
    <td>4</td>
    <td>5</td>
    <td></td>
    <td>6</td>
    <td>7</td>
    <td>8</td>
    <td>9</td>
    <td>10</td>
    <td>11</td>
    <td>12</td>
</tr>
  
<tr>
    <td>A</td>
    <td><input type="checkbox" name="seats" class="seats" value="A1"></td>
    <td><input type="checkbox" name="seats" class="seats" value="A2"></td>
    <td><input type="checkbox" name="seats" class="seats" value="A3"></td>
    <td><input type="checkbox" name="seats" class="seats" value="A4"></td>
    <td><input type="checkbox" name="seats" class="seats" value="A5"></td>
    <td class="seatGap"></td>
    <td><input type="checkbox" name="seats" class="seats" value="A6"></td>
    <td><input type="checkbox" name="seats" class="seats" value="A7"></td>
    <td><input type="checkbox" name="seats" class="seats" value="A8"></td>
    <td><input type="checkbox" name="seats" class="seats" value="A9"></td>
    <td><input type="checkbox" name="seats" class="seats" value="A10"></td>
    <td><input type="checkbox" name="seats" class="seats" value="A11"></td>
    <td><input type="checkbox" name="seats" class="seats" value="A12"></td>
  </tr>
  
  <tr>
    <td>B</td>
    <td><input type="checkbox" name="seats" class="seats" value="B1"></td>
    <td><input type="checkbox" name="seats" class="seats" value="B2"></td>
    <td><input type="checkbox" name="seats" class="seats" value="B3"></td>
    <td><input type="checkbox" name="seats" class="seats" value="B4"></td>
    <td><input type="checkbox" name="seats" class="seats" value="B5"></td>
    <td></td>
    <td><input type="checkbox" name="seats"class="seats" value="B6"></td>
    <td><input type="checkbox" name="seats" class="seats" value="B7"></td>
    <td><input type="checkbox" name="seats" class="seats" value="B8"></td>
    <td><input type="checkbox" name="seats" class="seats" value="B9"></td>
    <td><input type="checkbox" name="seats" class="seats" value="B10"></td>
    <td><input type="checkbox" name="seats" class="seats" value="B11"></td>
    <td><input type="checkbox" name="seats" class="seats" value="B12"></td>
  </tr>
  
  <tr>
    <td>C</td>
    <td><input type="checkbox" name="seats" class="seats" value="C1"></td>
    <td><input type="checkbox" name="seats" class="seats" value="C2"></td>
    <td><input type="checkbox" name="seats" class="seats" value="C3"></td>
    <td><input type="checkbox" name="seats" class="seats" value="C4"></td>
    <td><input type="checkbox" name="seats" class="seats" value="C5"></td>
    <td></td>
    <td><input type="checkbox" name="seats" class="seats" value="C6"></td>
    <td><input type="checkbox" name="seats" class="seats" value="C7"></td>
    <td><input type="checkbox" name="seats" class="seats" value="C8"></td>
    <td><input type="checkbox" name="seats" class="seats" value="C9"></td>
    <td><input type="checkbox" name="seats" class="seats" value="C10"></td>
    <td><input type="checkbox" name="seats"class="seats" value="C11"></td>
    <td><input type="checkbox" name="seats" class="seats" value="C12"></td>
</tr>
  
<tr>
    <td>D</td>
    <td><input type="checkbox" class="seats" value="D1"></td>
    <td><input type="checkbox" class="seats" value="D2"></td>
    <td><input type="checkbox" class="seats" value="D3"></td>
    <td><input type="checkbox" class="seats" value="D4"></td>
    <td><input type="checkbox" class="seats" value="D5"></td>
    <td></td>
    <td><input type="checkbox" class="seats" value="D6"></td>
    <td><input type="checkbox" class="seats" value="D7"></td>
    <td><input type="checkbox" class="seats" value="D8"></td>
    <td><input type="checkbox" class="seats" value="D9"></td>
    <td><input type="checkbox" class="seats" value="D10"></td>
    <td><input type="checkbox" class="seats" value="D11"></td>
    <td><input type="checkbox" class="seats" value="D12"></td>
</tr>
  
<tr>
    <td>E</td>
    <td><input type="checkbox" class="seats" value="E1"></td>
    <td><input type="checkbox" class="seats" value="E2"></td>
    <td><input type="checkbox" class="seats" value="E3"></td>
    <td><input type="checkbox" class="seats" value="E4"></td>
    <td><input type="checkbox" class="seats" value="E5"></td>
    <td></td>
    <td><input type="checkbox" class="seats" value="E6"></td>
    <td><input type="checkbox" class="seats" value="E7"></td>
    <td><input type="checkbox" class="seats" value="E8"></td>
    <td><input type="checkbox" class="seats" value="E9"></td>
    <td><input type="checkbox" class="seats" value="E10"></td>
    <td><input type="checkbox" class="seats" value="E11"></td>
    <td><input type="checkbox" class="seats" value="E12"></td>
</tr>
  
<tr class="seatVGap"></tr>
  
<tr>
    <td>F</td>
    <td><input type="checkbox" class="seats" value="F1"></td>
    <td><input type="checkbox" class="seats" value="F2"></td>
    <td><input type="checkbox" class="seats" value="F3"></td>
    <td><input type="checkbox" class="seats" value="F4"></td>
    <td><input type="checkbox" class="seats" value="F5"></td>
    <td></td>
    <td><input type="checkbox" class="seats" value="F6"></td>
    <td><input type="checkbox" class="seats" value="F7"></td>
    <td><input type="checkbox" class="seats" value="F8"></td>
    <td><input type="checkbox" class="seats" value="F9"></td>
    <td><input type="checkbox" class="seats" value="F10"></td>
    <td><input type="checkbox" class="seats" value="F11"></td>
    <td><input type="checkbox" class="seats" value="F12"></td>
</tr>
  
<tr>
    <td>G</td>
    <td><input type="checkbox" class="seats" value="G1"></td>
    <td><input type="checkbox" class="seats" value="G2"></td>
    <td><input type="checkbox" class="seats" value="G3"></td>
    <td><input type="checkbox" class="seats" value="G4"></td>
    <td><input type="checkbox" class="seats" value="G5"></td>
    <td></td>
    <td><input type="checkbox" class="seats" value="G6"></td>
    <td><input type="checkbox" class="seats" value="G7"></td>
    <td><input type="checkbox" class="seats" value="G8"></td>
    <td><input type="checkbox" class="seats" value="G9"></td>
    <td><input type="checkbox" class="seats" value="G10"></td>
    <td><input type="checkbox" class="seats" value="G11"></td>
    <td><input type="checkbox" class="seats" value="G12"></td>
</tr>
    
</table>
  
<br/><button onclick="updateTextArea()">Confirm Selection</button>
</center>
</div>
      
<br/><br/>

<div class="displayerBoxes">
<center>
  <table class="Displaytable">
  <tr>
    <th>Theatre Name</th>
    <th>Number of Seats</th>
    <th>Seats</th>
  </tr>
  <tr>
    <td><span id="display_time"></span></td>
    <td><textarea id="NumberDisplay"></textarea></td>
    <td><textarea id="seatsDisplay"></textarea></td>
  </tr>
</table>
</center>
</div>
	<br><br>
	<h2 align="center">Ticket Reservation </h2>
	<form align="center" action="receipt.html">
	<fieldset>
	<label># of Adult</label> <input type="text" id="adult" /><br><br>
	<label># of Senior </label> <input type="text" id="senior" /><br><br>
	<label># of Child </label> <input type="text" id="child" /><br><br>
	<input type="submit" value="Submit" onclick="passvalues()" />
	</fieldset>
	</form>

<script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.0/jquery.min.js'></script>
<script src='https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js'></script>
<script  src="script.js"></script>
</body>
</html>